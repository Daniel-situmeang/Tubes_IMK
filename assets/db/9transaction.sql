-- phpMyAdmin SQL Dump
-- version 5.0.2
-- https://www.phpmyadmin.net/
--
-- Host: 127.0.0.1
-- Generation Time: Dec 20, 2020 at 01:47 PM
-- Server version: 10.4.13-MariaDB
-- PHP Version: 7.4.8

SET SQL_MODE = "NO_AUTO_VALUE_ON_ZERO";
START TRANSACTION;
SET time_zone = "+00:00";


/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8mb4 */;

--
-- Database: `9transaction`
--

DELIMITER $$
--
-- Procedures
--
CREATE DEFINER=`root`@`localhost` PROCEDURE `get_detail_penjualan_master` (IN `id_pm` MEDIUMINT(1))  NO SQL
SELECT 
				a.`nomor_nota`, 
				a.`grand_total`,
				a.`tanggal`,
				a.`bayar`,
				a.`id_user` AS id_kasir,
				a.`id_pelanggan`,
				a.`keterangan_lain` AS catatan,
				b.`nama` AS nama_pelanggan,
				b.`alamat` AS alamat_pelanggan,
				b.`telp` AS telp_pelanggan,
				b.`info_tambahan` AS info_pelanggan 
			FROM 
				`pj_penjualan_master` AS a 
				LEFT JOIN `pj_pelanggan` AS b ON a.`id_pelanggan` = b.`id_pelanggan` 
			WHERE 
				a.`id_penjualan_m` = id_pm 
			LIMIT 1$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `get_detail_transaksi` (IN `id_pm` MEDIUMINT(1))  NO SQL
SELECT 
				b.`id_barang`,  
				b.`nama_barang`, 
				CONCAT('Rp. ', REPLACE(FORMAT(a.`harga_satuan`, 0),',','.') ) AS harga_satuan, 
				a.`harga_satuan` AS harga_satuan_asli, 
				a.`jumlah_beli`,
				CONCAT('Rp. ', REPLACE(FORMAT(a.`total`, 0),',','.') ) AS sub_total,
				a.`total` AS sub_total_asli  
			FROM 
				`pj_penjualan_detail` a 
				LEFT JOIN `pj_barang` b ON a.`id_barang` = b.`id_barang` 
			WHERE 
				a.`id_penjualan_m` = id_pm 
			ORDER BY 
				a.`id_penjualan_d` ASC$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `laporan_keuntungan` (IN `awal` DATETIME, IN `akhir` DATETIME)  NO SQL
SELECT 
				DISTINCT(SUBSTR(a.`tanggal`, 1, 10)) AS tanggal,
				(
					f_untung(a.`tanggal`)  
				) AS total_keuntungan 
			FROM 
				`pj_penjualan_master` AS a 
			WHERE 
				SUBSTR(a.`tanggal`, 1, 10) >= awal 
				AND SUBSTR(a.`tanggal`, 1, 10) <= akhir 
			ORDER BY 
				a.`tanggal` ASC$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `laporan_penjualan` (IN `awal` DATETIME, IN `akhir` DATETIME)  NO SQL
SELECT 
				DISTINCT(SUBSTR(a.`tanggal`, 1, 10)) AS tanggal,
				(
					f_total_penghasilan(a.`tanggal`)
				) AS total_penjualan 
			FROM 
				`pj_penjualan_master` AS a 
			WHERE 
				SUBSTR(a.`tanggal`, 1, 10) >= awal 
				AND SUBSTR(a.`tanggal`, 1, 10) <= akhir 
			ORDER BY 
				a.`tanggal` ASC$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_hapus_pj_barang` (IN `idb` VARCHAR(11))  NO SQL
DELETE FROM `pj_barang` WHERE id_barang = idb$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_hapus_pj_kategori` (IN `id_pkb` MEDIUMINT(1))  NO SQL
DELETE FROM `pj_kategori_barang` WHERE id_user = id_pkb$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_hapus_pj_user` (IN `idpu` MEDIUMINT(1))  NO SQL
DELETE FROM `pj_user` WHERE id_user = idpu$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_jumlah_barang` ()  BEGIN
DECLARE jumlah_barang INT;
SELECT COUNT(*) AS jumlah_barang FROM pj_barang;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_jumlah_kategori` ()  BEGIN
DECLARE jumlah_kategori INT;
SELECT COUNT(*) AS jumlah_kategori FROM pj_kategori_barang;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_jumlah_pelanggan` ()  BEGIN
DECLARE jumlah_pelanggan INT;
SELECT COUNT(*) AS jumlah_pelanggan FROM pj_pelanggan;
END$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_tambah_pj_barang` (IN `nama` VARCHAR(60), IN `total` MEDIUMINT(1), IN `hrg` DECIMAL(10), IN `ikb` MEDIUMINT(1), IN `imb` MEDIUMINT(1), IN `mdl` DECIMAL(10))  NO SQL
INSERT INTO pj_barang(nama_barang, total_stok, harga, id_kategori_barang, id_ukuran, modal) VALUES (nama, total, hrg, ikb, imb, mdl)$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_tambah_pj_kategori` (IN `cate` VARCHAR(40))  NO SQL
INSERT INTO `pj_kategori_barang`(`kategori`) VALUES (cate)$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_tambah_pj_user` (IN `user` VARCHAR(40), IN `pass` VARCHAR(60), IN `name` VARCHAR(50), IN `akses` TINYINT(1), IN `state` ENUM('Aktif','Non Aktif'))  NO SQL
INSERT INTO pj_user (username, password, nama, id_akses, status) VALUES (user, pass, name, akses, state)$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_update_pj_barang` (IN `idb` VARCHAR(11), IN `nama` VARCHAR(60), IN `total` MEDIUMINT(1), IN `hrg` DECIMAL(10), IN `ikb` MEDIUMINT(1), IN `imb` MEDIUMINT(1), IN `mdl` DECIMAL(10))  NO SQL
UPDATE `pj_barang` SET `nama_barang`= nama, `total_stok`= total, `harga`= hrg, `id_kategori_barang`=ikb, `id_ukuran`=imb, `modal`= mdl WHERE `id_barang` = idb$$

CREATE DEFINER=`root`@`localhost` PROCEDURE `p_update_pj_user` (IN `idpu` MEDIUMINT(1), IN `user` VARCHAR(40), IN `pass` VARCHAR(60), IN `name` VARCHAR(50), IN `ida` TINYINT(1), IN `state` ENUM('Aktif','Non Aktif'))  NO SQL
UPDATE `pj_user` SET `username` = user, `password` = pass, `nama` = name, `id_akses` = ida, `status_user` = state WHERE `id_user`= idpu$$

--
-- Functions
--
CREATE DEFINER=`root`@`localhost` FUNCTION `f_cek_status_pelanggan` (`state` ENUM('aktif','non aktif')) RETURNS INT(11) BEGIN

DECLARE total_pelanggan integer;
SELECT COUNT(*) into total_pelanggan from pj_pelanggan where state = status_anggota;

RETURN total_pelanggan;

END$$

CREATE DEFINER=`root`@`localhost` FUNCTION `f_jumlah_penjualan` (`awal` DATE, `akhir` DATE) RETURNS INT(11) NO SQL
BEGIN

DECLARE hasil INTEGER;

SELECT COUNT(*) INTO hasil FROM `pj_penjualan_master`WHERE tanggal >= awal and tanggal <= akhir;

RETURN hasil;

END$$

CREATE DEFINER=`root`@`localhost` FUNCTION `f_total_penghasilan` (`tgl` DATE) RETURNS DECIMAL(11,0) NO SQL
BEGIN
DECLARE total_penghasilan integer;
					SELECT 
						SUM(b.`grand_total`) into total_penghasilan
					FROM 
						`pj_penjualan_master` AS b 
					WHERE 
						SUBSTR(b.`tanggal`, 1, 10) = SUBSTR(tgl, 1, 10) 
					LIMIT 1;
RETURN total_penghasilan;
END$$

CREATE DEFINER=`root`@`localhost` FUNCTION `f_untung` (`tgl` DATE) RETURNS DECIMAL(10,0) NO SQL
BEGIN
DECLARE total_penghasilan integer;
					SELECT 
						SUM(b.`grand_total` - b.`grand_modal`) into total_penghasilan
					FROM 
						`pj_penjualan_master` AS b 
					WHERE 
						SUBSTR(b.`tanggal`, 1, 10) = SUBSTR(tgl, 1, 10) 
					LIMIT 1;
RETURN total_penghasilan;
END$$

DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `log_login`
--

CREATE TABLE `log_login` (
  `id` int(10) NOT NULL,
  `username` varchar(40) NOT NULL,
  `datetime` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `log_pj_barang`
--

CREATE TABLE `log_pj_barang` (
  `id_lpb` int(11) NOT NULL,
  `id_barang` varchar(40) NOT NULL,
  `nama_barang` varchar(60) NOT NULL,
  `total_stok` int(10) NOT NULL,
  `modal` int(10) NOT NULL,
  `harga` decimal(10,0) NOT NULL,
  `id_kategori_barang` mediumint(1) NOT NULL,
  `id_ukuran` mediumint(1) NOT NULL,
  `status` varchar(6) NOT NULL,
  `tanggal` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `log_pj_barang`
--

INSERT INTO `log_pj_barang` (`id_lpb`, `id_barang`, `nama_barang`, `total_stok`, `modal`, `harga`, `id_kategori_barang`, `id_ukuran`, `status`, `tanggal`) VALUES
(108, '1', 'anjay', 2, 3000, '4000', 33, 1, 'INSERT', '2020-12-11 23:51:43'),
(109, '1', 'anjay', 2, 3000, '4000', 33, 1, 'UPDATE', '2020-12-11 23:59:45'),
(110, '1', 'anjaykan', 2, 3000, '4000', 33, 1, 'UPDATE', '2020-12-12 00:00:15'),
(111, '1', 'anjaykan', 2, 3000, '4000', 33, 1, 'UPDATE', '2020-12-12 00:38:12'),
(112, '2', 'contoh1', 2, 3000, '4000', 34, 2, 'INSERT', '2020-12-13 11:15:17'),
(113, '3', 'contoh2', 2, 20000, '10000', 34, 2, 'INSERT', '2020-12-13 11:15:17'),
(114, '3', 'contoh2', 2, 20000, '10000', 34, 2, 'UPDATE', '2020-12-15 22:14:07'),
(115, '2', 'contoh1', 0, 3000, '4000', 34, 2, 'DELETE', '2020-12-19 01:14:09'),
(116, '4', 'coba', 2, 1000, '1000', 33, 1, 'UPDATE', '2020-12-19 12:51:56'),
(117, '4', 'coba', 2, 3000, '1000', 33, 1, 'UPDATE', '2020-12-19 12:52:29'),
(118, '4', 'coba', 2, 1000, '1000', 33, 1, 'UPDATE', '2020-12-19 12:52:50'),
(119, '3', 'contoh2', 2, 20000, '10000', 34, 2, 'UPDATE', '2020-12-20 16:56:35'),
(120, '3', 'contoh2', 1, 20000, '10000', 34, 2, 'UPDATE', '2020-12-20 16:57:34'),
(121, '3', 'contoh2', 0, 20000, '10000', 34, 2, 'DELETE', '2020-12-20 18:48:16'),
(122, '5', 'anjaykankau', 0, 3000, '4000', 35, 3, 'DELETE', '2020-12-20 18:48:28'),
(123, '6', 'coba', 0, 20000, '50000', 34, 2, 'DELETE', '2020-12-20 18:53:14'),
(124, '7', 'coba', 20, 3000, '4000', 36, 2, 'UPDATE', '2020-12-20 18:59:40'),
(125, '7', 'coba', 30, 3000, '4000', 36, 2, 'UPDATE', '2020-12-20 19:00:14'),
(126, '4', 'coba', 2, 1000, '2000', 33, 1, 'UPDATE', '2020-12-20 19:01:27'),
(127, '4', 'coba', 3, 1000, '2000', 33, 1, 'UPDATE', '2020-12-20 19:04:13'),
(128, '7', 'coba', 0, 3000, '4000', 36, 2, 'DELETE', '2020-12-20 19:04:53'),
(129, '4', 'coba', 4, 1000, '2000', 33, 1, 'UPDATE', '2020-12-20 19:05:34'),
(130, '4', 'coba', 5, 1000, '2000', 33, 1, 'UPDATE', '2020-12-20 19:08:09'),
(131, '4', 'coba', 5, 1000, '2000', 33, 2, 'UPDATE', '2020-12-20 19:08:25'),
(132, '4', 'coba', 4, 1000, '2000', 33, 2, 'UPDATE', '2020-12-20 19:10:19'),
(133, '4', 'coba', 5, 1000, '2000', 33, 2, 'UPDATE', '2020-12-20 19:10:36'),
(134, '4', 'coba', 6, 1000, '2000', 33, 2, 'UPDATE', '2020-12-20 19:11:15'),
(135, '4', 'coba', 0, 1000, '2000', 33, 2, 'DELETE', '2020-12-20 19:11:43'),
(136, '1', 'anjaykan', 1, 3000, '4000', 33, 1, 'UPDATE', '2020-12-20 19:16:07'),
(137, '1', 'anjaykan', 3, 3000, '4000', 33, 1, 'UPDATE', '2020-12-20 19:16:20');

-- --------------------------------------------------------

--
-- Table structure for table `log_pj_kategori_barang`
--

CREATE TABLE `log_pj_kategori_barang` (
  `id_lpkb` int(11) NOT NULL,
  `id_kategori_barang` mediumint(1) NOT NULL,
  `kategori` varchar(40) NOT NULL,
  `id_rasa` int(2) DEFAULT NULL,
  `status` varchar(6) NOT NULL,
  `tanggal` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `log_pj_kategori_barang`
--

INSERT INTO `log_pj_kategori_barang` (`id_lpkb`, `id_kategori_barang`, `kategori`, `id_rasa`, `status`, `tanggal`) VALUES
(75, 34, 'anjay', NULL, 'UPDATE', '2020-12-13 13:18:31'),
(76, 34, 'baru', NULL, 'UPDATE', '2020-12-13 13:18:38'),
(77, 34, 'baru', NULL, 'UPDATE', '2020-12-13 13:18:47'),
(78, 34, 'baru', NULL, 'UPDATE', '2020-12-13 13:19:00'),
(79, 34, 'bar', NULL, 'UPDATE', '2020-12-13 13:19:03'),
(80, 33, 'lain', NULL, 'UPDATE', '2020-12-13 13:29:16'),
(81, 34, 'bar', NULL, 'UPDATE', '2020-12-13 13:31:00'),
(82, 34, 'bar', NULL, 'UPDATE', '2020-12-13 13:33:57'),
(83, 34, 'bar', NULL, 'UPDATE', '2020-12-13 13:35:23'),
(84, 34, 'bar', NULL, 'UPDATE', '2020-12-13 13:37:59'),
(85, 34, 'bar', NULL, 'UPDATE', '2020-12-13 13:38:11'),
(86, 34, 'bara', NULL, 'UPDATE', '2020-12-13 13:48:41'),
(87, 33, 'lainnya', NULL, 'UPDATE', '2020-12-13 13:59:31'),
(88, 35, 'contoh', NULL, 'INSERT', '2020-12-19 12:54:26'),
(89, 36, 'bar', NULL, 'INSERT', '2020-12-19 12:57:00'),
(90, 37, 'baru', NULL, 'INSERT', '2020-12-19 12:59:20'),
(91, 38, 'baru', NULL, 'INSERT', '2020-12-19 12:59:21'),
(92, 39, 'baru', NULL, 'INSERT', '2020-12-19 12:59:22'),
(93, 40, 'baru', NULL, 'INSERT', '2020-12-19 12:59:22'),
(94, 41, 'baru', NULL, 'INSERT', '2020-12-19 12:59:22'),
(95, 42, 'baru', NULL, 'INSERT', '2020-12-19 13:00:48'),
(96, 43, 'baru', NULL, 'INSERT', '2020-12-19 13:00:50'),
(97, 44, 'baru', NULL, 'INSERT', '2020-12-19 13:00:50'),
(98, 45, 'baru', NULL, 'INSERT', '2020-12-19 13:00:50'),
(99, 46, 'baru', NULL, 'INSERT', '2020-12-19 13:00:51'),
(100, 47, 'baru', NULL, 'INSERT', '2020-12-19 13:00:51'),
(101, 47, 'baru', NULL, 'DELETE', '2020-12-19 13:01:08'),
(102, 46, 'baru', NULL, 'DELETE', '2020-12-19 13:01:10'),
(103, 45, 'baru', NULL, 'DELETE', '2020-12-19 13:01:14'),
(104, 44, 'baru', NULL, 'DELETE', '2020-12-19 13:01:16'),
(105, 43, 'baru', NULL, 'DELETE', '2020-12-19 13:01:18'),
(106, 42, 'baru', NULL, 'DELETE', '2020-12-19 13:01:20'),
(107, 41, 'baru', NULL, 'DELETE', '2020-12-19 13:01:21'),
(108, 40, 'baru', NULL, 'DELETE', '2020-12-19 13:01:23'),
(109, 39, 'baru', NULL, 'DELETE', '2020-12-19 13:01:25'),
(110, 38, 'baru', NULL, 'DELETE', '2020-12-19 13:01:27'),
(111, 37, 'baru', NULL, 'DELETE', '2020-12-20 18:53:05'),
(112, 36, 'bar', NULL, 'UPDATE', '2020-12-20 19:16:35'),
(113, 36, 'baru', NULL, 'UPDATE', '2020-12-20 19:19:12'),
(114, 36, 'barus', NULL, 'UPDATE', '2020-12-20 19:19:13'),
(115, 36, 'barus', NULL, 'UPDATE', '2020-12-20 19:19:53'),
(116, 48, 'lainnya', NULL, 'INSERT', '2020-12-20 19:29:21'),
(117, 49, 'lainnya', NULL, 'INSERT', '2020-12-20 19:29:37'),
(118, 50, 'coba', NULL, 'INSERT', '2020-12-20 19:30:39'),
(119, 50, 'coba', NULL, 'DELETE', '2020-12-20 19:32:58'),
(120, 49, 'lainnya', NULL, 'DELETE', '2020-12-20 19:33:02'),
(121, 48, 'lainnya', NULL, 'DELETE', '2020-12-20 19:33:38'),
(122, 36, 'barus', NULL, 'DELETE', '2020-12-20 19:34:16'),
(123, 35, 'contoh', NULL, 'DELETE', '2020-12-20 19:34:36'),
(124, 34, 'bara', NULL, 'DELETE', '2020-12-20 19:34:58'),
(125, 33, 'lainnya', NULL, 'DELETE', '2020-12-20 19:35:55'),
(126, 51, 'lainnya', NULL, 'INSERT', '2020-12-20 19:44:37'),
(127, 32, 'Pakan', NULL, 'DELETE', '2020-12-20 19:46:27'),
(128, 51, 'lainnya', NULL, 'DELETE', '2020-12-20 19:46:29');

-- --------------------------------------------------------

--
-- Table structure for table `log_pj_pelanggan`
--

CREATE TABLE `log_pj_pelanggan` (
  `id_lpp` int(11) NOT NULL,
  `id_pelanggan` mediumint(1) NOT NULL,
  `nama` varchar(40) NOT NULL,
  `alamat` text NOT NULL,
  `telp` varchar(40) NOT NULL,
  `status_anggota` enum('Aktif','Non Aktif') NOT NULL,
  `status` varchar(6) NOT NULL,
  `tanggal` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `log_pj_pelanggan`
--

INSERT INTO `log_pj_pelanggan` (`id_lpp`, `id_pelanggan`, `nama`, `alamat`, `telp`, `status_anggota`, `status`, `tanggal`) VALUES
(42, 6, 'daniel', 'saf', '24', 'Aktif', 'DELETE', '2020-12-20 18:14:45'),
(43, 5, 'keling3', 'dsfahbafjd', '1341353', 'Aktif', 'DELETE', '2020-12-20 18:16:02'),
(44, 4, 'gsdhsgidn', 'adfjafd', '38483923', 'Aktif', 'DELETE', '2020-12-20 18:37:42'),
(45, 3, 'geyling', 'tasbih', '2467419419', 'Aktif', 'DELETE', '2020-12-20 18:49:00'),
(46, 2, 'bayu', 'jln konoha', '1311314797', 'Aktif', 'DELETE', '2020-12-20 18:50:30'),
(47, 1, 'bayu', 'jln konoha', '1311314797', 'Aktif', 'DELETE', '2020-12-20 18:51:56');

-- --------------------------------------------------------

--
-- Table structure for table `log_pj_user`
--

CREATE TABLE `log_pj_user` (
  `id_lpu` int(11) NOT NULL,
  `id_user` varchar(40) NOT NULL,
  `username` varchar(40) NOT NULL,
  `nama` varchar(50) NOT NULL,
  `id_akses` tinyint(1) NOT NULL,
  `status_user` enum('Aktif','Non Aktif') NOT NULL,
  `status` varchar(6) NOT NULL,
  `tanggal` datetime NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

-- --------------------------------------------------------

--
-- Table structure for table `pj_akses`
--

CREATE TABLE `pj_akses` (
  `id_akses` tinyint(1) UNSIGNED NOT NULL,
  `label` varchar(10) NOT NULL,
  `level_akses` varchar(15) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_akses`
--

INSERT INTO `pj_akses` (`id_akses`, `label`, `level_akses`) VALUES
(1, 'admin', 'Administrator'),
(2, 'kasir', 'Staff Kasir'),
(3, 'inventory', 'Staff Inventory'),
(4, 'keuangan', 'Staff Keuangan');

-- --------------------------------------------------------

--
-- Table structure for table `pj_barang`
--

CREATE TABLE `pj_barang` (
  `id_barang` int(10) NOT NULL,
  `nama_barang` varchar(60) NOT NULL,
  `total_stok` mediumint(1) UNSIGNED NOT NULL,
  `modal` decimal(10,0) NOT NULL,
  `harga` decimal(10,0) NOT NULL,
  `id_kategori_barang` mediumint(1) UNSIGNED NOT NULL,
  `id_ukuran` mediumint(1) NOT NULL,
  `qrcode` varchar(100) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_barang`
--

INSERT INTO `pj_barang` (`id_barang`, `nama_barang`, `total_stok`, `modal`, `harga`, `id_kategori_barang`, `id_ukuran`, `qrcode`) VALUES
(1, 'anjaykan', 4, '3000', '4000', 33, 1, 'http://localhost/Tubes_IMK/assets/temp/testb4f97cbde0ecda8da0b2fa7c18ea329c.png');

--
-- Triggers `pj_barang`
--
DELIMITER $$
CREATE TRIGGER `t_delete_pj_barang` BEFORE DELETE ON `pj_barang` FOR EACH ROW BEGIN 
INSERT INTO log_pj_barang
SET id_barang = old.id_barang,
nama_barang = old.nama_barang,
modal = old.modal,
harga = old.harga,
id_kategori_barang = old.id_kategori_barang,
id_ukuran = old.id_ukuran,
status = 'DELETE',
tanggal = NOW();

END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `t_update_pj_barang` BEFORE UPDATE ON `pj_barang` FOR EACH ROW BEGIN 
INSERT INTO log_pj_barang
SET id_barang = new.id_barang,
nama_barang = old.nama_barang,
total_stok = old.total_stok,
modal = old.modal,
harga = old.harga,
id_kategori_barang = old.id_kategori_barang,
id_ukuran = old.id_ukuran,
status = 'UPDATE',
tanggal = NOW();

END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `pj_ci_sessions`
--

CREATE TABLE `pj_ci_sessions` (
  `id` varchar(40) NOT NULL,
  `ip_address` varchar(45) NOT NULL,
  `timestamp` int(10) UNSIGNED NOT NULL DEFAULT 0,
  `data` blob NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_ci_sessions`
--

INSERT INTO `pj_ci_sessions` (`id`, `ip_address`, `timestamp`, `data`) VALUES
('ccrgmmae8nmnljr77ahlbp4rkkje21nt', '::1', 1608045234, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383034353233343b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('cdb34jhl5agruff2rele0r53efgd7kho', '::1', 1608045284, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383034353233343b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('cpikf4rri2jtng102gvokl4l7iqrj2fq', '::1', 1608092024, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383039323032343b),
('cfpvvu7lbsjlv0dinoj2hl5q79o9fd9n', '::1', 1608219481, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383231393234353b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('7nde31u988p3vsenhho1oulp512etepi', '::1', 1608309640, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383330393634303b),
('t639po6g4rurl8i5ofj2852lme39r844', '::1', 1608310120, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331303132303b),
('fmior64e6s99ap8u451f1c9j33br8ct5', '::1', 1608310514, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331303531343b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('vnp75rnpk7n435emi6ug3r1s65t7god8', '::1', 1608310922, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331303932323b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('vtkkok3mil7k078hdq7vbmi4m56h80no', '::1', 1608311805, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331313830353b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31313a22646974616d6261686b616e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('p5tvago0qqevhesm8hj2nvpfcneg03mv', '::1', 1608312348, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331323334383b),
('5mtkb52sqga0ptmuke7vugm7e6pognjn', '::1', 1608313106, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331333130363b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31313a22646974616d6261686b616e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('trsila14aenh2tlosfg6ee634afmvkj4', '::1', 1608313423, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331333432333b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('6ldncoa8sd6ocs6lcmsju40dibb54enr', '::1', 1608313880, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331333838303b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31313a22646974616d6261686b616e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('mqdbvjig8u1o3i824an0evjqtn928rqf', '::1', 1608314581, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331343538313b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31313a22646974616d6261686b616e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('9dm2d15nq9gppo8gn3gdi7g2aers57d4', '::1', 1608314981, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331343938313b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31313a22646974616d6261686b616e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('vi4geav20sfna2mhgg8mn5mlqc9gubb2', '::1', 1608315307, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331353330373b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('2pt0qoo3ga5i045hc0jovbt1t1asulji', '::1', 1608315667, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331353636373b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('hllnvgrgfm6uok249g8u0he62t4i0fbu', '::1', 1608316012, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331363031323b676167616c7c733a353a226c6f67696e223b5f5f63695f766172737c613a313a7b733a353a22676167616c223b733a333a226e6577223b7d),
('g7c2kgesp65b72s33huvq46dhuuu8q8m', '::1', 1608316420, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331363432303b),
('aqdta7bevf5tjfphb5in7cktdspg17gn', '::1', 1608316634, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383331363432303b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a353a226c6f67696e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('ush71q0onscg688vrjrm347o5tpp6utf', '::1', 1608356869, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383335363836393b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('ovo3r77jmj3vbte4ju8202qqj26diobk', '::1', 1608357170, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383335373137303b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31333a226d656e67656469742064617461223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('rr6i3v94m2vrnb7cobqhi3eerbskc4ul', '::1', 1608357555, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383335373535353b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31373a226d656e616d626168206b617465676f7269223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('8cfqmhasco1n4hu8iahfhircfnpbcjiq', '::1', 1608358142, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383335383134323b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('kn4gm8ajhq0u2oa5jpt01gt9vmbtutas', '::1', 1608358460, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383335383436303b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('4efqigvalj648ofjcplp7tlabodf08ep', '::1', 1608358487, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383335383436303b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('mt25p8fufr4f22o1a8us7mp2r1qjhk16', '::1', 1608381617, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383338313537323b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a353a226c6f67696e223b),
('doopddkv9t3dib7iq59mqbh8kmutaafg', '::1', 1608457530, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383435373533303b676167616c7c733a353a226c6f67696e223b5f5f63695f766172737c613a313a7b733a353a22676167616c223b733a333a226f6c64223b7d),
('26s2dpojrhhmr3gik99ft6n0eiqs5m7d', '::1', 1608458024, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383435383032343b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a353a226c6f67696e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('t2foms3c0u46m64qleas9fs93ko0m7kl', '::1', 1608458380, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383435383338303b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31393a226d656e79696d70616e207472616e73616b7369223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('4b79qlgeuonoo8cn8tup05skcigo3dlb', '::1', 1608458863, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383435383836333b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a353a226c6f67696e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226e6577223b7d),
('d0415gms858uj1sp3fdqbv7keiepe4ih', '::1', 1608459239, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383435393233393b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('ss8dn5eupcj9os4e6tij02bn0u5poskb', '::1', 1608459687, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383435393638373b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('kpjje9mslf6d40jmia0b34gn24kck3gb', '::1', 1608460027, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436303032373b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a33353a226d656e616d62616820646174612070656c616e6767616e20646974616d6261686b616e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226f6c64223b7d),
('dcbv6ffrdvigq4j8tb1r347fthnaf6dm', '::1', 1608460413, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436303431333b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('du3cjrp6ri5dt5m0tauu2egpv7e7u9bb', '::1', 1608460780, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436303738303b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('l9ihq01vj3jnqve9fhji1m9sksfp7uov', '::1', 1608461178, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436313137383b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('rgdun956v8jmh873omnf7e7sh500r83b', '::1', 1608461796, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436313739363b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('6885h0tema1ccm5vp2gol749urd76l2c', '::1', 1608462668, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436323636383b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('6mcibhqcu45he95igkc6rumb4qhqh882', '::1', 1608462997, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436323939373b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('ih98o2a7f32n9ju1ev38vit8vat2h305', '::1', 1608463597, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436333539373b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('vh8tf8ebg4kaoatecdcrfafqr6umvsue', '::1', 1608463898, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436333839383b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('smptcl1ocqaq9v6tsg5gebhjksjv576j', '::1', 1608464264, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436343236343b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a32343a226d656e67686170757320646174612070656c616e6767616e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226e6577223b7d),
('rfoc2ptnamj7gqnsvqome005r28jqp95', '::1', 1608464618, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436343631383b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a32333a226d656e676564697420646174612070656c616e6767616e223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226e6577223b7d),
('1i0a1tjgjgf43iajdb9smpsqcpca6ul2', '::1', 1608464926, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436343932363b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b666c6173687c733a31343a226d656e79696d70616e2064617461223b5f5f63695f766172737c613a313a7b733a353a22666c617368223b733a333a226e6577223b7d),
('mf66nbgv83lun31d8vf4noatfbbovbmn', '::1', 1608465375, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436353337353b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('28dk6hjud75pp6en0sh7549srvjr5jhi', '::1', 1608465678, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436353637383b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('0oehj8n6ij0rhhfp0068i6o7fkl8cejh', '::1', 1608465979, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436353937393b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('7v1gvrtvlvihbrjcviremjt5bi5es9v4', '::1', 1608466281, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436363238313b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('eusv9rmutijhkllt0hqr765k4ov4lplp', '::1', 1608466589, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436363538393b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('il5e4f8qjrg218gji11nq6kcpub9dfp3', '::1', 1608467255, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436373235353b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('k8o6mfklnv4k3ueedjju56durp2crveu', '::1', 1608467579, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436373537393b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('9ceek5muibpdj6qof03gu0omd4h1u7br', '::1', 1608467978, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436373937383b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('rr9dm2cto7a92v2c3rgpfh0crl1gjs4t', '::1', 1608468384, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436383338343b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b),
('l9eahmhtgr8hujhf9mk3pjelqbuihjc1', '::1', 1608468390, 0x5f5f63695f6c6173745f726567656e65726174657c693a313630383436383338343b61705f69645f757365727c733a313a2231223b61705f70617373776f72647c733a34303a2264303333653232616533343861656235363630666332313430616563333538353063346461393937223b61705f6e616d617c733a353a2241646d696e223b61705f6c6576656c7c733a353a2261646d696e223b61705f6c6576656c5f63617074696f6e7c733a31333a2241646d696e6973747261746f72223b);

-- --------------------------------------------------------

--
-- Table structure for table `pj_kategori_barang`
--

CREATE TABLE `pj_kategori_barang` (
  `id_kategori_barang` mediumint(1) UNSIGNED NOT NULL,
  `kategori` varchar(40) NOT NULL,
  `id_rasa` int(2) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Triggers `pj_kategori_barang`
--
DELIMITER $$
CREATE TRIGGER `t_delete_pj_kategori` BEFORE DELETE ON `pj_kategori_barang` FOR EACH ROW BEGIN 
INSERT INTO log_pj_kategori_barang
SET id_kategori_barang = old.id_kategori_barang,
kategori = old.kategori,
status = 'DELETE',
tanggal = NOW();

END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `t_insert_pj_kategori` AFTER INSERT ON `pj_kategori_barang` FOR EACH ROW BEGIN 
INSERT INTO log_pj_kategori_barang
SET id_kategori_barang = new.id_kategori_barang,
kategori = new.kategori,
status = 'INSERT',
tanggal = NOW();

END
$$
DELIMITER ;
DELIMITER $$
CREATE TRIGGER `t_update_pj_kategori` BEFORE UPDATE ON `pj_kategori_barang` FOR EACH ROW BEGIN 
INSERT INTO log_pj_kategori_barang
SET id_kategori_barang = new.id_kategori_barang,
kategori = old.kategori,
status = 'UPDATE',
tanggal = NOW();

END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `pj_kategori_rasa`
--

CREATE TABLE `pj_kategori_rasa` (
  `id_rasa` int(2) NOT NULL,
  `nama_rasa` text NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_kategori_rasa`
--

INSERT INTO `pj_kategori_rasa` (`id_rasa`, `nama_rasa`) VALUES
(0, '-'),
(1, 'Manis'),
(2, 'Balado'),
(3, 'Original'),
(4, 'Kari');

-- --------------------------------------------------------

--
-- Table structure for table `pj_kategori_ukuran`
--

CREATE TABLE `pj_kategori_ukuran` (
  `id_ukuran` int(2) NOT NULL,
  `ukuran` varchar(20) NOT NULL
) ENGINE=InnoDB DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_kategori_ukuran`
--

INSERT INTO `pj_kategori_ukuran` (`id_ukuran`, `ukuran`) VALUES
(1, '1 kg'),
(2, '1/2 kg'),
(3, '1/4 kg'),
(4, 'Eceran 2000'),
(5, 'Eceran 1000');

-- --------------------------------------------------------

--
-- Table structure for table `pj_pelanggan`
--

CREATE TABLE `pj_pelanggan` (
  `id_pelanggan` int(10) NOT NULL,
  `nama` varchar(40) NOT NULL,
  `alamat` text DEFAULT NULL,
  `telp` varchar(40) DEFAULT NULL,
  `info_tambahan` text DEFAULT NULL,
  `waktu_input` datetime NOT NULL,
  `status_anggota` enum('Aktif','Non Aktif') NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_pelanggan`
--

INSERT INTO `pj_pelanggan` (`id_pelanggan`, `nama`, `alamat`, `telp`, `info_tambahan`, `waktu_input`, `status_anggota`) VALUES
(7, 'anggu', 'afdga', '082295234849', 'fadafd', '2020-12-20 19:39:47', 'Aktif');

--
-- Triggers `pj_pelanggan`
--
DELIMITER $$
CREATE TRIGGER `t_delete_pj_pelanggan` BEFORE DELETE ON `pj_pelanggan` FOR EACH ROW BEGIN 
INSERT INTO log_pj_pelanggan
SET id_pelanggan = old.id_pelanggan,
nama = old.nama,
alamat = old.alamat,
telp = old.telp,
status_anggota = old.status_anggota,
status = 'DELETE',
tanggal = NOW();

END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Table structure for table `pj_penjualan_detail`
--

CREATE TABLE `pj_penjualan_detail` (
  `id_penjualan_d` int(1) UNSIGNED NOT NULL,
  `id_penjualan_m` int(1) UNSIGNED NOT NULL,
  `id_barang` varchar(10) NOT NULL,
  `jumlah_beli` smallint(1) UNSIGNED NOT NULL,
  `harga_satuan` decimal(10,0) NOT NULL,
  `total` decimal(10,0) NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_penjualan_detail`
--

INSERT INTO `pj_penjualan_detail` (`id_penjualan_d`, `id_penjualan_m`, `id_barang`, `jumlah_beli`, `harga_satuan`, `total`) VALUES
(35, 23, '1', 1, '4000', '4000');

-- --------------------------------------------------------

--
-- Table structure for table `pj_penjualan_master`
--

CREATE TABLE `pj_penjualan_master` (
  `id_penjualan_m` int(1) UNSIGNED NOT NULL,
  `nomor_nota` varchar(40) NOT NULL,
  `tanggal` datetime NOT NULL,
  `grand_modal` int(20) NOT NULL,
  `grand_total` decimal(10,0) NOT NULL,
  `bayar` decimal(10,0) NOT NULL,
  `keterangan_lain` text DEFAULT NULL,
  `id_pelanggan` mediumint(1) UNSIGNED DEFAULT NULL,
  `id_user` mediumint(1) UNSIGNED NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_penjualan_master`
--

INSERT INTO `pj_penjualan_master` (`id_penjualan_m`, `nomor_nota`, `tanggal`, `grand_modal`, `grand_total`, `bayar`, `keterangan_lain`, `id_pelanggan`, `id_user`) VALUES
(23, '5FD3AB80535461', '2020-12-11 18:25:20', 3000, '4000', '5000', '', NULL, 1);

-- --------------------------------------------------------

--
-- Table structure for table `pj_user`
--

CREATE TABLE `pj_user` (
  `id_user` mediumint(1) UNSIGNED NOT NULL,
  `username` varchar(40) NOT NULL,
  `password` varchar(60) NOT NULL,
  `nama` varchar(50) NOT NULL,
  `id_akses` tinyint(1) UNSIGNED NOT NULL,
  `status_user` enum('Aktif','Non Aktif') NOT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

--
-- Dumping data for table `pj_user`
--

INSERT INTO `pj_user` (`id_user`, `username`, `password`, `nama`, `id_akses`, `status_user`) VALUES
(1, 'Adm9Transaction', 'd033e22ae348aeb5660fc2140aec35850c4da997', 'Admin', 1, 'Aktif'),
(10, 'bayu', '37974419a792b5e2d44822522806bc70e45d7c1a', 'uzumaki bayu', 2, 'Aktif');

--
-- Triggers `pj_user`
--
DELIMITER $$
CREATE TRIGGER `t_delete_pj_user` BEFORE DELETE ON `pj_user` FOR EACH ROW BEGIN 
INSERT INTO log_pj_user
SET id_user = old.id_user,
username = old.username,
nama = old.nama,
id_akses = old.id_akses,
status_user = old.status_user,
status = 'DELETE',
tanggal = NOW();

END
$$
DELIMITER ;

-- --------------------------------------------------------

--
-- Stand-in structure for view `v_akses_aplikasi`
-- (See below for the actual view)
--
CREATE TABLE `v_akses_aplikasi` (
`staff_bagian` varchar(10)
);

-- --------------------------------------------------------

--
-- Stand-in structure for view `v_penjualan_detail`
-- (See below for the actual view)
--
CREATE TABLE `v_penjualan_detail` (
`id_penjualan_d` int(1) unsigned
,`tanggal` datetime
,`nama_barang` varchar(60)
,`jumlah_beli` smallint(1) unsigned
,`harga_satuan` decimal(10,0)
,`total` decimal(10,0)
);

-- --------------------------------------------------------

--
-- Stand-in structure for view `v_transaksi`
-- (See below for the actual view)
--
CREATE TABLE `v_transaksi` (
`ID Transaksi` int(1) unsigned
,`nomor_nota` varchar(40)
,`tanggal` datetime
,`grand_modal` int(20)
,`grand_total` decimal(10,0)
,`bayar` decimal(10,0)
,`Nama Pelanggan` varchar(40)
,`Nama Pengurus` varchar(50)
);

-- --------------------------------------------------------

--
-- Structure for view `v_akses_aplikasi`
--
DROP TABLE IF EXISTS `v_akses_aplikasi`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_akses_aplikasi`  AS  select `pj_akses`.`label` AS `staff_bagian` from `pj_akses` where `pj_akses`.`id_akses` <> 1 order by `pj_akses`.`label` ;

-- --------------------------------------------------------

--
-- Structure for view `v_penjualan_detail`
--
DROP TABLE IF EXISTS `v_penjualan_detail`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_penjualan_detail`  AS  select `a`.`id_penjualan_d` AS `id_penjualan_d`,`b`.`tanggal` AS `tanggal`,`c`.`nama_barang` AS `nama_barang`,`a`.`jumlah_beli` AS `jumlah_beli`,`a`.`harga_satuan` AS `harga_satuan`,`a`.`total` AS `total` from ((`pj_penjualan_detail` `a` left join `pj_penjualan_master` `b` on(`a`.`id_penjualan_m` = `b`.`id_penjualan_m`)) left join `pj_barang` `c` on(`a`.`id_barang` = `c`.`id_barang`)) ;

-- --------------------------------------------------------

--
-- Structure for view `v_transaksi`
--
DROP TABLE IF EXISTS `v_transaksi`;

CREATE ALGORITHM=UNDEFINED DEFINER=`root`@`localhost` SQL SECURITY DEFINER VIEW `v_transaksi`  AS  select `a`.`id_penjualan_m` AS `ID Transaksi`,`a`.`nomor_nota` AS `nomor_nota`,`a`.`tanggal` AS `tanggal`,`a`.`grand_modal` AS `grand_modal`,`a`.`grand_total` AS `grand_total`,`a`.`bayar` AS `bayar`,`b`.`nama` AS `Nama Pelanggan`,`c`.`nama` AS `Nama Pengurus` from ((`pj_penjualan_master` `a` left join `pj_pelanggan` `b` on(`a`.`id_pelanggan` = `b`.`id_pelanggan`)) left join `pj_user` `c` on(`a`.`id_user` = `c`.`id_user`)) ;

--
-- Indexes for dumped tables
--

--
-- Indexes for table `log_pj_barang`
--
ALTER TABLE `log_pj_barang`
  ADD PRIMARY KEY (`id_lpb`);

--
-- Indexes for table `log_pj_kategori_barang`
--
ALTER TABLE `log_pj_kategori_barang`
  ADD PRIMARY KEY (`id_lpkb`);

--
-- Indexes for table `log_pj_pelanggan`
--
ALTER TABLE `log_pj_pelanggan`
  ADD PRIMARY KEY (`id_lpp`);

--
-- Indexes for table `log_pj_user`
--
ALTER TABLE `log_pj_user`
  ADD PRIMARY KEY (`id_lpu`);

--
-- Indexes for table `pj_akses`
--
ALTER TABLE `pj_akses`
  ADD PRIMARY KEY (`id_akses`);

--
-- Indexes for table `pj_barang`
--
ALTER TABLE `pj_barang`
  ADD PRIMARY KEY (`id_barang`),
  ADD KEY `id_kategori_barang` (`id_kategori_barang`),
  ADD KEY `id_ukuran` (`id_ukuran`);

--
-- Indexes for table `pj_ci_sessions`
--
ALTER TABLE `pj_ci_sessions`
  ADD KEY `ci_sessions_timestamp` (`timestamp`);

--
-- Indexes for table `pj_kategori_barang`
--
ALTER TABLE `pj_kategori_barang`
  ADD PRIMARY KEY (`id_kategori_barang`),
  ADD KEY `id_rasa` (`id_rasa`);

--
-- Indexes for table `pj_kategori_rasa`
--
ALTER TABLE `pj_kategori_rasa`
  ADD PRIMARY KEY (`id_rasa`);

--
-- Indexes for table `pj_kategori_ukuran`
--
ALTER TABLE `pj_kategori_ukuran`
  ADD PRIMARY KEY (`id_ukuran`);

--
-- Indexes for table `pj_pelanggan`
--
ALTER TABLE `pj_pelanggan`
  ADD PRIMARY KEY (`id_pelanggan`);

--
-- Indexes for table `pj_penjualan_detail`
--
ALTER TABLE `pj_penjualan_detail`
  ADD PRIMARY KEY (`id_penjualan_d`),
  ADD KEY `id_penjualan_m` (`id_penjualan_m`),
  ADD KEY `id_barang` (`id_barang`);

--
-- Indexes for table `pj_penjualan_master`
--
ALTER TABLE `pj_penjualan_master`
  ADD PRIMARY KEY (`id_penjualan_m`);

--
-- Indexes for table `pj_user`
--
ALTER TABLE `pj_user`
  ADD PRIMARY KEY (`id_user`),
  ADD KEY `id_akses` (`id_akses`);

--
-- AUTO_INCREMENT for dumped tables
--

--
-- AUTO_INCREMENT for table `log_pj_barang`
--
ALTER TABLE `log_pj_barang`
  MODIFY `id_lpb` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=138;

--
-- AUTO_INCREMENT for table `log_pj_kategori_barang`
--
ALTER TABLE `log_pj_kategori_barang`
  MODIFY `id_lpkb` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=129;

--
-- AUTO_INCREMENT for table `log_pj_pelanggan`
--
ALTER TABLE `log_pj_pelanggan`
  MODIFY `id_lpp` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=48;

--
-- AUTO_INCREMENT for table `log_pj_user`
--
ALTER TABLE `log_pj_user`
  MODIFY `id_lpu` int(11) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=9;

--
-- AUTO_INCREMENT for table `pj_akses`
--
ALTER TABLE `pj_akses`
  MODIFY `id_akses` tinyint(1) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=5;

--
-- AUTO_INCREMENT for table `pj_barang`
--
ALTER TABLE `pj_barang`
  MODIFY `id_barang` int(10) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- AUTO_INCREMENT for table `pj_kategori_barang`
--
ALTER TABLE `pj_kategori_barang`
  MODIFY `id_kategori_barang` mediumint(1) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=52;

--
-- AUTO_INCREMENT for table `pj_pelanggan`
--
ALTER TABLE `pj_pelanggan`
  MODIFY `id_pelanggan` int(10) NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=8;

--
-- AUTO_INCREMENT for table `pj_penjualan_detail`
--
ALTER TABLE `pj_penjualan_detail`
  MODIFY `id_penjualan_d` int(1) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=38;

--
-- AUTO_INCREMENT for table `pj_penjualan_master`
--
ALTER TABLE `pj_penjualan_master`
  MODIFY `id_penjualan_m` int(1) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=26;

--
-- AUTO_INCREMENT for table `pj_user`
--
ALTER TABLE `pj_user`
  MODIFY `id_user` mediumint(1) UNSIGNED NOT NULL AUTO_INCREMENT, AUTO_INCREMENT=11;
COMMIT;

/*!40101 SET CHARACTER_SET_CLIENT=@OLD_CHARACTER_SET_CLIENT */;
/*!40101 SET CHARACTER_SET_RESULTS=@OLD_CHARACTER_SET_RESULTS */;
/*!40101 SET COLLATION_CONNECTION=@OLD_COLLATION_CONNECTION */;
